### 1.社工的基本概念

* 社会工程学是黑客米特尼克在《欺骗的艺术》中率先提出的，其初始目的是为了让全球的网民们能够懂得网络安全，提高警惕，防止不必要的个人损失

* 社会工程学指的是通过设法与被攻击者建立一种虚假的信任关系，从而使其做出平时不愿为攻击者做出的事情，比如透露一个私密的电话号码或者告知一些内部的机密信息。

* 社会工程学的核心是依赖于人类的某种情绪，由情绪驱使人们为自己寻找借口来绕过安全策略和规则的限制，如果攻击不能成功地让被攻击者产生这种情绪，那么攻击者的阴谋就无法得逞

* 从广义上来说，社会工程学是一种通过对“人性”的心理弱点、本能反应、好奇心、信任、贪婪等心理陷阱进行诸如欺骗、伤害等危害手段取得自身利益的手法，它并不能等同于一般的欺骗手法，社会工程学尤其复杂，即使自认为最警惕最小心的人，一样会被高明的社会工程学手段损害利益

### 2.社工的基本方法

#### 2.1 基本方法

* baidu，google，社工神器MaltegoCE，搜目标的QQ号、常用ID、电话号码等等与之有关的可以得到一些有用信息后在加以扩大搜索范围

* 通过上一步的信息采集，基本会出现一些有用信息比如:贴吧里可以得到IP地址、毕业学校、出生日期、爱好的游戏 邮件地址等等

* 通过QQ空间其它交友博客可以得到人脉关系，兴趣爱好或者照片、出生日期、邮件地址、小名、姓名、注意留言板和说说里面和目标比较熟悉或者暧昧的人可以通过第三方人查到对方手机号码、你直接用目标朋友、同事、同学关系套出你想知道的、同时也可以通过朋友网查看对方真名或者淘宝转帐、基本从说说和**留言板**可以找出工作和名字

* 有了目标基本信息后还可以通过照片去baidu，google人肉搜索(百度识图)同时有的照片还有可能爆出地理位置

* 利用你得到了东西伪装加对方QQ进行游戏啊，技术啊，各种交流可以试着社出二代密保，或者得到对方信任发送木马或者邮箱网马等等最好你可以用异性QQ去加对方好友开视频语音原因你懂的(可以用虚拟软件+视频+变声器解决)

* 通过社工库查询一下目标QQ 电话 邮箱 身份证号码的泄露密码

  如果对方有独立站点或者博客查查网站的WHOIS得到 注册地址 域名商 手机 邮箱等等 也可以用着手中的信息去域名商那里大胆尝社工客户

* 如果对方是做网络销售或者卖什么软件的可以得到支付宝号 银行卡号 当然也可以参考身份证号码知识 同时也可以装着合作等等关系 汇款给对方 在利用各种借口(我这边银行提示你那边卡号冻结或者有问题, 需要你姓名和身份证确认才能完成汇款

* 善用 “忘记密码”这个功能,收集到一定资料,你会发现”找回密码”是多么容易

  当拿到对方一个帐号和密码时 可以尝试用此帐号登录一些搜索出来更他有关的网站或者BBS 也可以尝试登录一些知名网站(如:网易 腾讯 土豆 优酷 百度贴吧 淘宝 特别是:12306

#### 2.2 网络钓鱼攻击

方法：

- 鱼叉式网络钓鱼攻击（利用虚假邮件进行攻击）：攻击者通过发送带有攻击性的邮件给受害者，一旦受害者打开攻击邮件，点开攻击邮件中的附件等，就会给受害者的电脑造成一定的影响；APT攻击常用手段；

- 利用虚假网站进行攻击；

- 利用通讯工具进行攻击；

- 利用特洛伊木马进行攻击；

- 利用系统漏洞进行攻击；

- 利用移动通信产品进行网络钓鱼攻击；

特点：存在虚假性，存在针对性，存在多样性，存在可识别性，存在结合性，存在时效性

工具：`setoolkit`

菜单：

 1) Social-Engineering Attacks

 2) Penetration Testing (Fast-Track)

 3) Third Party Modules

 4) Update the Social-Engineer Toolkit

 5) Update SET configuration

 6) Help, Credits, and About

 99) Exit the Social-Engineer Toolkit

社会工程学攻击模块：

 **1) Spear-Phishing Attack Vectors（鱼叉式钓鱼攻击）**

 2) Website Attack Vectors（网站攻击）

 3) Infectious Media Generator（介质感染攻击）

 4) Create a Payload and Listener （创一个Payload和listener）

 5) Mass Mailer Attack (群发邮件攻击)

 6) Arduino-Based Attack Vector（基于arduino的攻击）

 7) Wireless Access Point Attack Vector（无线接入点的攻击）

 8) QRCode Generator Attack Vector（二维码攻击）

 9) Powershell Attack Vectors（powershell攻击）

 10) SMS Spoofing Attack Vector（短信欺骗攻击）

 11) Third Party Modules

 99) Return back to the main menu.

**钓鱼网站攻击步骤顺序**：1232

**鱼叉式钓鱼攻击步骤顺序**：

`set>1`选择 1，社会工程学攻击

`set>1`选择 1，鱼叉式钓鱼攻击

鱼叉式钓鱼攻击有 3 种：

1.  群发邮件；
2.  创建 1 个文件的附件；
3.  创建 1 个社会工程学模板。

`set:phishing>2`选择 2，即创建 1 个文件的附件

20 多种通过附件形式进行攻击的方式，利用操作系统和软件的漏洞进行攻击，也就是说在特定的版本或系统上才出现，因此要注意被测试的系统和软件版本。

`set:payload>6`选择 6， 6) Microsoft Word RTF pFragments Stack Buffer Overflow (MS10-087)。payload 选择为 MS10-087

`set:payload>4`选择 4，并输入本地监听地址 10.121.10.170

`set:phishing>2`选择 2，重命名文件为 hello.ppt

`set:phishing>1`选择 “1”，发送单份邮件  

`set:phishing>2`** **选择 “2”，使用邮件发送模板 
先输入 email 邮件主题，然后选择是以页面形式发送还是文本形式发送，此处选择 p，即文本形式发送。然后输入一些邮件内容，输入完毕后按 “Ctrl+C”。最后输入发送邮件的邮箱地址。如下图所示。

`set:phishing>2`选择 “2”，use your own server or open relay，使用自定义邮箱服务器 
输入发送邮件的邮箱地址：
输入发送邮件的邮箱可见名：
输入发送邮件的邮箱名：
输入发送邮件的邮箱密码：
输入发送邮箱的 SMTP 服务器地址：
输入 SMTP 服务器的端口：25 
是否设定邮件为高优先级：yes 
是否设置监听：yes

#### 2.3 密码心理学攻击

特点：从用户的心理入手，分析对方心理，从而更快的破解出密码

方法：

- 根据生日等个人信息进行密码猜解；

- 针对用户移动电话或身份证明文件进行用户密码推算；

- 针对用户身边亲朋或家属个人信息进行用户密码推算；

- 使用系统默认密码进行尝试；

- 使用常见的密码进行尝试；

1.用自己的中文拼音者最多。口令破解字典档应针对中国的特列！要用一些中文姓名拼音的字典如：wanghai ,zhangli,shenqin,等等！

2.用常用的英文单词 ，许多人都用了很有特定意义的单词，如:hello, good, happy, anything, 等等！

3.用计算机的中经常出现的单词 ，使用操作系统的命令，如：system, command, copy, harddisk, mouse, 等等！

4.用自己的出生日期 ，使用中国常用的日期表示方法！如970203,199703.050498等！

5.使用键盘字母格局，例如qwer1234，qazwsx123等等！
 希望上面的心理测试能给解密带来一写启示！而不要在盲目的用暴力法！ 

**根据前期收集的信息用以上思路制作专门的有针对性的密码字典**

特例：

1.手机号、身份证信息被网友通过社工库泄露。（身份证上包含住址，但后来证明此居所已被出售。）

2.网易邮箱密码被破解，牵连出背后的密保邮箱和其他常用邮箱。

3.利用邮箱登陆的人人网、豆瓣账号被搞定。

4.与邮箱密码相同或相似的京东、大众点评、外卖 App 被攻破。

5.某电商收货地址暴露，导致藏身住址被扒出，被媒体围堵。

#### 2.4 收集敏感信息

特点：

通过各种手段去获取机构、组织、公司、个人的一些敏感信息。而在获取这种信息的过程中，不易引起别人的注意，降低了攻击者自身的风险。

方法：

- 利用搜索引擎来收集目标信息和资料；

- 实施踩点和调查获取目标信息和资料；

- 利用网络钓鱼式攻击获取目标信息和资料；

- 利用企业或人员管理的缺失获取信息和资料，如qq群；

- 利用企业对密码管理的缺陷获取信息和资料，如企业默认密码；

- 利用企业内部资料管理及传播缺陷获取信息和资料，如git；




### 3.社工与渗透测试

反向社会工程学:
指黑客通过技术或非技术手段给网络或者计算机制造故障，使被攻击者深信问题的存在,诱使工作人员或者网络管理人员透露或泄露攻击需要获取的信息

### 4.钓鱼技术中的实战技巧

大多数社工场景下，攻击的目标属于个人电脑和个人手机。而现在网络环境个人电脑基本都是用宽带拨号上网，个人手机使用WIFI或者数据网络上网。往往是这些设备能够直接访问公网，公网却不能轻易直接访问到内网的设备

利用内网穿透服务；

Sunny-Ngrok；

frp；

花生壳；

### 5.中间人攻击技术

* 中间人攻击是指攻击者与通讯的两端分别创建独立的联系，并交换其所收到的数据，使通讯的两端认为他们正在通过一个私密的连接与对方直接对话，但事实上整个会话都被攻击者完全控制。

* 在中间人攻击中，攻击者可以拦截通讯双方的通话并插入新的内容。在许多情况下这是很简单的（例如，在一个未加密的Wi-Fi 无线接入点的接受范围内的中间人攻击者，可以将自己作为一个中间人插入这个网络）。

* 一个中间人攻击能成功的前提条件是攻击者能将自己伪装成每一个参与会话的终端，并且不被其他终端识破。中间人攻击是一个（缺乏）相互认证的攻击。大多数的加密协议都专门加入了一些特殊的认证方法以阻止中间人攻击。例如，SSL协议可以验证参与通讯的一方或双方使用的证书是否是由权威的受信任的数字证书认证机构颁发，并且能执行双向身份认证。

中间人攻击神器： WiFi Pineapple—**上帝之眼**

#### 5.1 ARP欺骗之网关劫持

原理：

ARP欺骗的运作原理是由攻击者发送假的ARP数据包到网络上，尤其是送到网关上。其目的是要让送至特定的IP地址的流量被错误送到攻击者所取代的地方。因此攻击者可将这些流量另行转送到真正的网关（被动式数据包嗅探，passive sniffing）或是篡改后再转送（中间人攻击，man-in-the-middle attack），这种方式成为ARP欺骗攻击

攻击者亦可将ARP数据包导到不存在的MAC地址以达到阻断服务攻击的效果，或者不进行数据库包转发，这种方式称为ARP断网攻击

•开启数据包转发功能

•攻击主机伪装成网关

•抓取截获数据流量

步骤：

第一步，在kali linux上开启ip转发功能，这样，kali linux就可以用来转发受害者的上网流量。

在kali linux的控制台上输入以下命令开启ip转发功能：`echo 1 > /proc/sys/net/ipv4/ip_forward`

第二步，开启流量监视软件wireshark，并且绑定kali linux的网卡。

第三步，启动kali linux上的arpspoof，对被害主机实施arp欺骗，将被害主机的流量转移到kali linux的网卡中来，此时攻击者的主机已经伪装成网关（网关劫持）

在控制台中输入命令： arpspoof -t 被害主机的地址 网关地址

第四步，模拟受害者上网，查看kali linux上的wireshark，是否监控到被害者的流量

#### 5.1 ARP欺骗之DNS劫持

•设置钓鱼站点 - Setoolkit

•设置DNS解析策略

•选择攻击目标

•选择攻击方式

•开始进行攻击

•将域名解析到钓鱼站点

•完成域名劫持攻击

原理：

劫持的网络范围内拦截域名解析的请求，分析请求的域名，把审查范围以外的请求放行，审查范围内的请求DNS劫持又称域名劫持，是指在，返回假的IP地址或者什么都不做使请求失去响应，其效果就是使特定的网络不能访问或使访问变成是假网址。

步骤：

第一步：进入kali的/var/www/html目录下，新建一个index.html文件

接着，开启kali的apache2服务，命令:`/etc/init.d/apache2 start`

第二步：打开ettercap的DNS文件进行编辑，在kali linux2.0下的文件路径为/etc/ettercap/etter.dns

在redirect位置 添加要重定向的域名，ip地址改为为kali的ip地址

第三步：打开ettercap工具，点击扫描主机，靶机网关地址添加到target 1，靶机ip地址添加到target 2

第四步：配置DNS劫持选项

​	操作步骤一：配置中间人攻击Mitm

​	操作步骤二：选择第一个，远程欺骗连接

​	操作步骤三:配置插件选项，选择dns欺骗

​	操作步骤四：点击开始劫持 √